import{H as i}from"./types.3d83ab55.js";import{G as l}from"./entry.18113fa8.js";import{U as u,l as c,P as g}from"./url.7325f4a5.js";const h=a=>{const e=new Promise(function(s,r){g.parse(a,{download:!0,header:!0,skipEmptyLines:!0,complete:s,error:r})});return console.log("hauptbuch.getDataFromGoogle: ",e),e},m="/gviz/tq?tqx=out:csv",p="/edit#gid=1543409034",d="&sheet=FahrtenbuchV-",n=u+m+d,k=a=>a.indexOf("€")>0?a:parseFloat(a==""?"0":a)+" €",b=l("hauptbuch",{state:()=>({bookings:[],_url:u+p}),actions:{async loadBussiData(a){console.log("hauptbuch.loadBussiData: ",a,n);let s=(await h(n)).data.map((t,o)=>(t.rowNr=o,t));if(Number(a)&&(s=s.filter(t=>t.Datum.substring(0,4)===a)),a&&a.indexOf("bis")>0){const t=a.split("bis")[1].trim();s=s.filter(o=>o.Datum.substring(0,4)<=t)}console.log("hauptbuch.loadBussiData: ",a,s.length,s);const r=(t,o)=>'<a target="_blank" href='+this._url+"#range="+(o+2)+":"+(o+2)+">"+t+"</a>";this.bookings=s.map(t=>new i(r(t.rowNr,t.rowNr),t.Datum,t.Wer,t["km (Endstand)"],t["Liter getankt"],t.Benzinpreis,k(t.Betrag),t.Was,t["V-Schlüssel"],t.km,t["km seit letzter Tankung"],parseFloat(t["Verbrauch/l"].replace(",","."))||0)),c("hauptbuch.loadBussiData: ",a,this.bookings.length,this.bookings)}},getters:{url:a=>a._url}});export{b as u};
