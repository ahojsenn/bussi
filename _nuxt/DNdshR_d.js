import{H as i}from"./CB678u4y.js";import{q as u}from"./gD-45rxH.js";import{U as r,l as c,P as l}from"./BXcYWNav.js";const g=a=>new Promise(function(e,o){l.parse(a,{download:!0,header:!0,skipEmptyLines:!0,complete:e,error:o})}),h="/gviz/tq?tqx=out:csv",m="/edit#gid=1543409034",p="&sheet=FahrtenbuchV-",k=r+h+p,d=a=>a.indexOf("€")>0?a:parseFloat(a==""?"0":a)+" €",D=u("hauptbuch",{state:()=>({bookings:[],_url:r+m}),actions:{async loadBussiData(a){let e=(await g(k)).data.map((t,s)=>(t.rowNr=s,t));if(Number(a)&&(e=e.filter(t=>t.Datum.substring(0,4)===a)),a&&a.indexOf("bis")>0){const t=a.split("bis")[1].trim();e=e.filter(s=>s.Datum.substring(0,4)<=t)}const o=(t,s)=>'<a target="_blank" href='+this._url+"#range="+(s+2)+":"+(s+2)+">"+t+"</a>";this.bookings=e.map(t=>new i(o(t.rowNr,t.rowNr),t.Datum,t.Wer,t["km (Endstand)"],t["Liter getankt"],t.Benzinpreis,d(t.Betrag),t.Was,t["V-Schlüssel"],t.km,t["km seit letzter Tankung"],t["Verbrauch/l"].replace(",",".")??"0",t.rowNr)),c("hauptbuch.loadBussiData: ",a,this.bookings.length,this.bookings)},async createBooking(a){console.log("hauptbuch.createBooking: ",a),this.bookings.push(a)}},getters:{url:a=>a._url}});export{D as u};
